<nav>
    <div class="nav-wrapper">
        <a href="index.html" class="brandtitle brand-logo">
            <img class="logo" src="assets/img/logo.png">
        </a>
        <a href="#" data-target="mobile-demo" class="sidenav-trigger">
            <i class="material-icons">menu</i>
        </a>
        <ul class="left hide-on-med-and-down">
            <li>
                <a href="#">
                    <img class="ewemoji" src="assets/img/emojis/ewemoji.png">
                </a>
            </li>
            <li>
                <a href="#">
                    <img class="bffsemoji" src="assets/img/emojis/bffs.png">
                </a>
            </li>
            <li>
                <a href="#">
                    <img class="lolemoji" src="assets/img/emojis/lolemoji.png">
                </a>
            </li>
            <li>
                <a href="#">
                    <img class="nsfwemoji" src="assets/img/emojis/nsfwemoji.png">
                </a>
            </li>
            <li>
                <a href="#">
                    <img class="failemoji" src="assets/img/emojis/failemoji.png">
                </a>
            </li>
            <li>
                <a href="#">
                    <img class="wtfemoji" src="assets/img/emojis/wtfemoji.png">
                </a>
            </li>
        </ul>
        <ul class="right hide-on-med-and-down">
            <li>
                <a href="#">
                    <img class="fameemoji" src="assets/img/emojis/fameemoji2.png">
                </a>
            </li>
            <li>
                <a href="#">
                    <img class="shameemoji" src="assets/img/emojis/shameemoji2.png">
                    </i>
                </a>
            </li>
            <li>
                <a href="#">
                    <img class="door" src="assets/img/emojis/door.png">
                    </i>
                </a>
            </li>
        </ul>
    </div>
</nav>

<ul class="sidenav" id="mobile-demo">
    <li>
        <a href="#">EW</a>
    </li>
    <li>
        <a href="#">BFF</a>
    </li>
    <li>
        <a href="#">LOL</a>
    </li>
    <li>
        <a href="#">NSFW</a>
    </li>
    <li>
        <a href="#">FAIL</a>
    </li>
    <li>
        <a href="#">WTFam</a>
    </li>
    <li>
        <a href="#">Hall Of Fame</a>
    </li>
    <li>
        <a href="#">Hall Of Shame</i>
        </a>
    </li>
    <li>
        <a href="#">Sign Out</i>
        </a>
    </li>
</ul>

<div class="wrapper">
    <div class="row">
        <form id="updatetextform" method="post" enctype='multipart/form-data' action="/api/update" >
            <div class="col s4 col m4 textcaption left">
                <textarea id='caption' type="text" class="form-control" placeholder="Type your caption here" rows="3" cols="10"></textarea>
            </div>

            <div class="col col s8 col m8 textupload right">Text screenshot goes here</div>

            <div class="col s4 col m4 textcategoriesdiv left">Check the categories that best fit your text:
                <div class="form-check textcategories">
                    <p>
                        <label>
                            <input type="checkbox" class="ewcategory" name='ew' id="ew"/>
                            <span class="categorytext">EW</span>
                        </label>
                        <label>
                            <input type="checkbox" class="bffcategory" name='bff' id="bff"/>
                            <span class="categorytext">BFF</span>
                        </label>
                        <label>
                            <input type="checkbox" class="lolcategory" name='lol' id="lol"/>
                            <span class="categorytext">LOL</span>
                        </label>
                        <label>
                            <input type="checkbox" class="nsfwcategory" name='nsfw' id="nsfw"/>
                            <span class="categorytext">NSFW</span>
                        </label>
                        <label>
                            <input type="checkbox" class="failcategory" name='fail' id="fail"/>
                            <span class="categorytext">FAIL</span>
                        </label>
                        <label>
                            <input type="checkbox" class="wtfamcategory" name='wtfam' id="wtfam"/>
                            <span class="categorytext">WTFam</span>
                        </label>
                    </p>
                </div>
            </div>

            <div class="col s4 col m4 textsharing left">Sharing is caring!
                <div class="socialholder">
                    <img class="socialicons fbicon" src="assets/img/fb.png">
                    <img class="socialicons igicon" src="assets/img/ig.png">
                    <img class="socialicons twicon" src="assets/img/tw.png">
                </div>
            </div>

            <button class="btn btn-primary textuploadsubmit light-blue" type="submit">Submit</button>
        </form>
    </div>
</div>

<script type="text/javascript" src="assets/javascript/materialize.min.js"></script>
<script type="text/javascript" src="assets/javascript/materializejs.js"></script>

<script>
    $(document).ready(function() {

        var textId = window.location.pathname.split("/").pop()
        $.get('/api/text/'+textId)
        .then(function(response) {
            console.log("response.id on page load: " + response.id)
            var imageElem = $('<img src="'+response.image+'">')
            $('.textupload').html(imageElem);
       });


        $(document).on("submit", "#updatetextform", updateTextSubmit);

        function updateTextSubmit(event) {
            event.preventDefault();
            var textId = window.location.pathname.split("/").pop();
            console.log('textId: ' + textId);

            updatedText({
                id: 36,
                caption: "bla bla bla", //$("#caption").val(),
                ew: 1, // $('#ew').val(),
                bff: 1, // $('#bff').val(),
                lol: 1, // $('#lol').val(),
                nsfw: 1, // $('#nsfw').val(),
                fail: 1, // $('#fail').val(),
                wtfam: 1, // $('#wtfam').val(),
                userId: 20
            })
        }

        function updatedText(textData) {
            console.log(textData);
            $.post('/api/update/'+textId, textData)
            .then(console.log("working?"));
        };

    })
</script>

